{% extends 'base.html' %}

{% block content %}
<div class="achievements-container">
    <h1>üèÜ –ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>

    <div class="navigation">
        <a href="{% url 'index' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Ü–µ–ª—è–º</a>
    </div>

    <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–æ–±—ä–µ–∫—Ç—ã Achievement) -->
    <h2>üéñÔ∏è –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ({{ achievements.count }})</h2>

    {% if achievements %}
        <div class="achievements-list">
            {% for achievement in achievements %}
                <div class="achievement-item">
                    <h3>üèÖ {{ achievement.title }}</h3>
                    <p class="achievement-description">{{ achievement.description }}</p>
                    <div class="achievement-meta">
                        <span class="achievement-date">üìÖ {{ achievement.achieved_at|date:"d.m.Y" }}</span>
                        {% if achievement.points %}
                            <span class="achievement-points">‚≠ê {{ achievement.points }} –±–∞–ª–ª–æ–≤</span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π. –ó–∞–≤–µ—Ä—à–∞–π—Ç–µ —Ü–µ–ª–∏ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!</p>
        </div>
    {% endif %}

    <!-- –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ -->
    <h2>‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ ({{ completed_goals.count }})</h2>

    {% if completed_goals %}
        <div class="completed-goals-list">
            {% for goal in completed_goals %}
                <div class="completed-goal-item">
                    <h3>üéØ {{ goal.title }}</h3>
                    <p class="goal-description">{{ goal.description }}</p>
                    <div class="goal-meta">
                        <span class="goal-date">üìÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: {{ goal.updated_at|date:"d.m.Y" }}</span>
                        <span class="goal-steps">üìù –®–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: {{ goal.steps.count }}</span>
                    </div>

                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —à–∞–≥–∞–º -->
                    <div class="steps-progress">
                        {% with completed_steps=goal.steps.filter.is_completed.count %}
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {% widthratio completed_steps goal.steps.count 100 %}%"></div>
                        </div>
                        <span class="progress-text">{{ completed_steps }}/{{ goal.steps.count }} —à–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                        {% endwith %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π.</p>
        </div>
    {% endif %}
</div>

{% endblock %}
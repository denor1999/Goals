{% extends 'base.html' %}
{% load static %}

{% block title %}–í—Å–µ —Ü–µ–ª–∏ - –ú–æ–∏ —Ü–µ–ª–∏{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'index.css' %}">
{% endblock %}

{% block content %}
    <h1 class="page-title">–í—Å–µ —Ü–µ–ª–∏</h1>
    <p class="page-subtitle">–í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏</p>

    <!-- –î–æ–±–∞–≤–∏–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —Ü–µ–ª–∏ -->
    <div style="margin-bottom: 20px;">
        <a href="{% url 'add_goal' %}" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ü–µ–ª—å</a>
        <a href="{% url 'achievements' %}" class="btn btn-secondary">üèÜ –ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
    </div>

    <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ü–µ–ª–∏ -->
    <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ —Ü–µ–ª–∏ ({{ active_goals.count }})</h2>
    {% if active_goals %}
        {% for goal in active_goals %}
            <div class="goal-item">
                <h2 class="goal-title">
                    <a href="tasks/">{{ goal.title }}</a>
                </h2>
                <p class="goal-description">{{ goal.description }}</p>

                <div class="goal-meta">
                    <span class="deadline">üìÖ –î–æ: {{ goal.target_date }}</span>
                    <span class="status status-in_progress">
                        üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ
                    </span>
                    <span class="steps">üìù –®–∞–≥–æ–≤: {{ goal.steps.count }}</span>
                </div>

                <div class="quick-actions">
                    <form method="post" action="{% url 'complete_goal' goal.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary btn-sm">
                            ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
                        </button>
                    </form>
                    <a href="{% url 'goal_detail' goal.id %}" class="btn btn-secondary btn-sm">
                        üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ü–µ–ª–µ–π</h3>
            <p>–ù–∞—á–Ω–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —Ü–µ–ª–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞!</p>
        </div>
    {% endif %}

    <!-- –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ -->
    <h2>‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ü–µ–ª–∏ ({{ completed_goals.count }})</h2>
    {% if completed_goals %}
        {% for goal in completed_goals %}
            <div class="goal-item" style="background-color: #f8fff8; border-color: #4CAF50;">
                <h2 class="goal-title">
                    üéâ {{ goal.title }}
                </h2>
                <p class="goal-description">{{ goal.description }}</p>

                <div class="goal-meta">
                    <span class="deadline">üìÖ –ë—ã–ª–æ –¥–æ: {{ goal.target_date }}</span>
                    <span class="status status-completed" style="color: #4CAF50;">
                        ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
                    </span>
                    <span class="steps">üìù –®–∞–≥–æ–≤: {{ goal.steps.count }}</span>
                </div>

                <div class="quick-actions">
                    <form method="post" action="{% url 'reopen_goal' goal.id %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline btn-sm">
                            üîÑ –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É
                        </button>
                    </form>
                    <a href="{% url 'goal_detail' goal.id %}" class="btn btn-secondary btn-sm">
                        üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π.</p>
        </div>
    {% endif %}
{% endblock %}
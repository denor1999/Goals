{% extends 'base.html' %}
{% load static %}

{% block title %}{{ goal.title }} - –ú–æ–∏ —Ü–µ–ª–∏{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'goal_detail.css' %}">
{% endblock %}

{% block content %}
    <div class="goal-header">
        <h1 class="goal-title">{{ goal.title }}</h1>
    </div>

    <div class="meta-container">
        <div class="meta-item">
            <span class="meta-label">–î–µ–¥–ª–∞–π–Ω:</span>
            <span>{{ goal.deadline }}</span>
        </div>
        <div class="meta-item">
            <span class="meta-label">–°—Ç–∞—Ç—É—Å:</span>
            <span class="status status-{{ goal.status }}">
                {% if goal.status == 'in_progress' %}–í –ø—Ä–æ—Ü–µ—Å—Å–µ{% else %}‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ{% endif %}
            </span>
        </div>
    </div>

    <div class="section">
        <h2 class="section-title">–û–ø–∏—Å–∞–Ω–∏–µ</h2>
        <p class="description-text">{{ goal.description }}</p>
    </div>

    {% if goal.steps %}
        <div class="section">
            <h2 class="section-title">–®–∞–≥–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <ul class="steps-list">
                {% for step in goal.steps %}
                    <li class="step-item">{{ step }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <div class="action-section">
        <h3 class="action-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª—å—é</h3>
        <div class="btn-group">
            {% if goal.status == 'in_progress' %}
                <form method="post" action="{% url 'complete_goal' goal.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">
                        ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é
                    </button>
                </form>
            {% else %}
                <form method="post" action="{% url 'reopen_goal' goal.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline">
                        üîÑ –í–µ—Ä–Ω—É—Ç—å –≤ —Ä–∞–±–æ—Ç—É
                    </button>
                </form>
            {% endif %}
            <a href="{% url 'index' %}" class="btn btn-secondary">
                ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
            </a>
        </div>
    </div>
{% endblock %}